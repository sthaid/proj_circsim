inductor circuit
- graphics
- search for ALL CAPACITOR and mimic
- make a simple resistor inducotor,  hopefully time constant is same


display meter or scope
review this file

when specifying model run/cont this should reset the intvl if a param is provided

debug param to enable prints
   set debug xxxxxx

improve all test settings

XXX issues
display.c:        // xxx try to clear xadj,yadj when the set center cmd is issued
display.c:                    // XXX always use this for remote conn
display.c:        // XXX if the terms dont match, display in red, and print a message
main.c:            // xxx parse color  NOT GREEN or WHITE
main.c:    // xxx also check x0,y0 not x0,y1
main.c:    // xxx verify not overlapping with existing component
main.c:    // xxx how do we know max_term is okay
main.c:// xxx check henrys

reverse colors

don't allow mulitple remote connection to same gridloc

SDL prints
[HOME haid@home proj_circsim]$ ./model  test/t3a
02/22/18 22:16:41.812 INFO model_thread: model_state is RUNNING
02/22/18 22:16:41.813 INFO sdl_init: Available Video Drivers: 
02/22/18 22:16:41.813 INFO sdl_init:    x11
02/22/18 22:16:41.813 INFO sdl_init:    wayland
02/22/18 22:16:41.813 INFO sdl_init:    dummy
02/22/18 22:16:42.114 INFO sdl_init: sdl_win_width=1920 sdl_win_height=981
02/22/18 22:16:42.127 INFO sdl_init: using font /usr/share/fonts/gnu-free/FreeMonoBold.ttf
02/22/18 22:16:42.127 INFO sdl_init: success
02/22/18 22:16:42.131 INFO sdl_create_text_texture: font_ptsize=30 width=18 height=31
02/22/18 22:17:15.103 INFO sdl_create_text_texture: font_ptsize=27 width=16 height=28
02/22/18 22:17:15.151 INFO sdl_create_text_texture: font_ptsize=24 width=15 height=25
02/22/18 22:17:15.197 INFO sdl_create_text_texture: font_ptsize=22 width=13 height=23
02/22/18 22:17:15.229 INFO sdl_create_text_texture: font_ptsize=20 width=12 height=21
02/22/18 22:17:15.289 INFO sdl_create_text_texture: font_ptsize=18 width=11 height=19
02/22/18 22:17:15.567 INFO sdl_create_text_texture: font_ptsize=16 width=10 height=17
02/22/18 22:17:15.598 INFO sdl_create_text_texture: font_ptsize=15 width=9 height=16
02/22/18 22:17:15.630 INFO sdl_create_text_texture: font_ptsize=14 width=9 height=15
02/22/18 22:17:15.682 INFO sdl_create_text_texture: font_ptsize=12 width=8 height=13
02/22/18 22:17:19.775 INFO sdl_create_text_texture: font_ptsize=11 width=7 height=12
02/22/18 22:17:19.807 INFO sdl_create_text_texture: font_ptsize=10 width=6 height=11
02/22/18 22:17:51.886 INFO sdl_create_text_texture: font_ptsize=17 width=11 height=18
02/22/18 22:17:53.518 INFO sdl_create_text_texture: font_ptsize=25 width=15 height=26


- - - - - - - - - - - - - - - - - - - - - - - 

display.c:// XXX no + -  and maybe smaller

model step cmd

t3 new version

display.c:// XXX use WIRE instead of CONNECTION

save a schematic so that it runs

add run_intvl param, also used by cont

display.c:// XXX set delta_t 1ms not working,   .9999ms okay

display.c:// XXX use model stop - instead of pause

-----------
-----------
-----------
-----------
-----------
-----------

click display for pause, rn , cont

white on black

---

optimization, and multi threads


review T3 screen


ac simple circuit
   power / capacitor
   verify 90 dgrees

reevaluate new_model.c

remote connecions on grid

smooth display values
  T5 unstable after 1 sec

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  CODED xxxxxxxxxxxxxxxxxxxxxxxx

update center and scale params when display is panned
 - get rid of center cmd

make time params in units  S, ms, us, ns
- and debug print them out when the model decodes them for initial debug

disable DEBUG levle prints

deltat secs - .0001e-6

rename to model

issue prompt after a delay

experiment with dc ramp time, make a param

- - - - - - - - - - -  AND TESTED


xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  CANCELLED

model cont can continue from reset

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

NEW COMMANDS
=============

background color

fonts

capacitor  equation

use cap for battery

treat ground as a node


ISSUES
------
direction of current and voltage displayed at meters and scopes
  - could label components with dots when meter or scope is attached
          what colors for the dots, don't want RED or GREEN
when modify a component can the model be kept going
  - perhaps if the model is running then the component can adjust gradually, say ove 100 iterations;
    otherwise when the model is not running the component would be set immedeately
what limit to place on delta_t_us, considering the component adjust time, and the frequency
  of power supplies;   other dynamic considerations would be left to the user
how to lable power supplies on the display

not sure if I should be using comp_id in user intfc

HOW TO GET THERE
----------------

CURRENTS

- params
delta_t_us    1
current       on off
voltage       on off 
grid          on off
commpnoent    id value off
center        A1
scale         200

- larger size points in util_sdl.c

- keep track of term current in nodes
   - pre or post compute the currents through each node


- support routines to convert values to/from strings    STARTED ON THIS

- think about updates to the model to support capacitors, 

- run the model not fastr than real time

- scale font 


---- DONE  ---
- identify components  R1, C1, ...
    - add to component_t
- add gridlocstr to each gridloc
- rename model

- don't need the power supply value displayed on the grid, but may need to identify the power supply
  on the display somehow    DONE

- pass full args to each cmd    DONE

- use strings for params, the value can have spaces    DONE

- display grid coords at every point    DONE

- add center and scale params    DONE

- add the center cmd     DONE


- model support for value adjustment

---- MORE TODO -------

- add the modify cmd,  and add general way to gradual adjust components
    when the model is running;  how to know if the model is running

- make a routine in display.c to create the string that is displayed 
    start by displaying xxxxx if these values not yet supported
         // XXX make routines to return ohms_str volts_str, etc
         // XXX option to display currents instead of or in addition to comp values

- add new panes for the meters and scopes
   - add meter cmd, 
   - add scope cmd
   - also display component v,i,p, etc

- update show cmd to show the new stuff

- disable utils_predefinded_ graph mouse controls

- misc
  - better make_component_str, include units

- need more tests, such as
  - series/parallel resistors
  - infinite resistor array
  - resistor / capacitor time constant
  - capacitor / inductor resonant circuit
  - ac signal to capacitor, demonstrate zero energy on the power supply


LIST OR NEW CMDS
------------------
center 
modify
meter 
scope
trigger

center
------

center
  resets display to default center and zoom

set cmd : - use strings for param names and values
-------------------------------------------------

set delta_t_us      number
set grid            on|off
set display         comp_id|comp_current|comp_value 
set center          A26
set zoom            100

modify  cmd  - changes a component value   XXX can this be done while model is running?
--------------------------------------------------------------------------------------

modify 7 value1 value2 ...
  if model is running then initiate a gradual adjust, otherwide immedeate

meter cmd
---------

meter A 7  ????
meter A a1 a2
meter A a1 ground
meter A off
  display red and black dots on components

scope cmd and trigger cmd
-----------------------

scope B 7 current xscale=xxx yscale=xxx yoffset=xxx
  display red and black dots on components
    OR
scope B voltage
scope B xscale=xxx 
scope B yscale=xxx
scope B yoffset=xxx
scope B off

trigger B

show cmd 
--------

args:
  help
  params
  component N
  components
  ground
  center
  meters
  scopes

NOTES:
-------

METER display example
   power_7  V=xxx I=xxx P=xxx E=xxx
   resistor_8  V=xxx I=xxx        XXX  need the direction

1 watt-second == 1 joule


LATER
-----

better help, and include cmd categories

FROM DIDPLAY.C
---------------

// XXX make routines to return ohms_str volts_str, etc
// XXX option to display currents instead of or in addition to comp values
// XXX don't need the power supply value displayed on the grid, in the status pane would be fine
// XXX display power supply current in status pane
// XXX cmd to center the display














xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx


rename compid to comp_id throughout
    
be able to see power supply power and energy; through a capacitor circuit

better unit printing strings for ohms, farads, etc
clean up so far
center cmd
select to display current of component values
zoom display increased range, and reduce font size

slew power supply or other components
display power supply in status pane,
 - especially want to see current
 - other ways possible, such as mouse hover
clean up test pgms
 - use 2 tests for infinite grid
add support for capacitor and test pgm
  for cap time constant



xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

-O0 optimization

-----------------
clear
read
save
add-resistor A1 A2 1000
add A1 A2 resistor 10000
add A1 A2 power    dc,5
add A1 A2 switch   open
add A1 A5 wire
del A1 A2
show

reset
run
stop
open and close switches
change values of components

// xxx don't know if I like all the time tags on the prints

XXX TODO
- add dcpower
- add-connection A1 Z9
- make simple test circuit

- cmd to set stuff
    switch    1   open
    resistor  7   100 ohm
    capacitor 3   20 uf  OR 5 v

- improve the display of components,  add point and other capabilities
  - larger points
- display voltage at every grid location
- graphical display of voltage

- start cirsim file
  - populate grid
  - analyze grid to create nodes without wires

